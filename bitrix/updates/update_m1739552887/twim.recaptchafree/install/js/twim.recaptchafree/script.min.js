"use strict";!function(r,c){var l=l||{};l.form_submit;var i=r.recaptchaFreeOptions;l.loadApi=function(){if(!c.getElementById("recaptchaApi")){var e=c.createElement("script");e.async=!0,e.id="recaptchaApi",e.src="//www.google.com/recaptcha/api.js?onload=RecaptchafreeLoaded&render=explicit&hl="+i.lang,e.onerror=function(){console.error('Failed to load "www.google.com/recaptcha/api.js"')},c.getElementsByTagName("head")[0].appendChild(e)}return!0},l.loaded=function(){if(l.renderById=l.renderByIdAfterLoad,l.renderAll(),"invisible"===i.size){c.addEventListener("submit",function(e){if(e.target&&"FORM"===e.target.tagName){var t=e.target.querySelector("div.g-recaptcha").getAttribute("data-widget");grecaptcha.execute(t),l.form_submit=e.target,e.preventDefault()}},!1);for(var e=c.querySelectorAll(".grecaptcha-badge"),t=1;t<e.length;t++)e[t].style.display="none"}r.jQuery&&jQuery(c).ajaxComplete(function(){l.reset()}),void 0!==r.BX.addCustomEvent&&r.BX.addCustomEvent("onAjaxSuccess",function(){l.reset()})},l.renderAll=function(){for(var e=c.querySelectorAll("div.g-recaptcha"),t=0;t<e.length;t++)e[t].hasAttribute("data-widget")||l.renderById(e[t].getAttribute("id"))},l.renderByIdAfterLoad=function(e){var t=c.getElementById(e),a=grecaptcha.render(t,{sitekey:t.hasAttribute("data-sitekey")?t.getAttribute("data-sitekey"):i.key,theme:t.hasAttribute("data-theme")?t.getAttribute("data-theme"):i.theme,size:t.hasAttribute("data-size")?t.getAttribute("data-size"):i.size,callback:t.hasAttribute("data-callback")?t.getAttribute("data-callback"):i.callback,badge:t.hasAttribute("data-badge")?t.getAttribute("data-badge"):i.badge});t.setAttribute("data-widget",a)},l.reset=function(){l.renderAll();for(var e=c.querySelectorAll("div.g-recaptcha[data-widget]"),t=0;t<e.length;t++){var a=e[t].getAttribute("data-widget");r.grecaptcha&&grecaptcha.reset(a)}},l.submitForm=function(e){if(void 0!==l.form_submit){var t=c.createElement("INPUT");t.setAttribute("type","hidden"),t.name="g-recaptcha-response",t.value=e,l.form_submit.appendChild(t);for(var a=l.form_submit.elements,r=0;r<a.length;r++)if("submit"===a[r].getAttribute("type")){var i=c.createElement("INPUT");i.setAttribute("type","hidden"),i.name=a[r].name,i.value=a[r].value,l.form_submit.appendChild(i)}c.createElement("form").submit.call(l.form_submit)}},l.throttle=function(a,r,i){var n,d,c,l=null,o=0;i=i||{};function u(){o=!1===i.leading?0:(new Date).getTime(),l=null,c=a.apply(n,d),l||(n=d=null)}return function(){var e=(new Date).getTime();o||!1!==i.leading||(o=e);var t=r-(e-o);return n=this,d=arguments,t<=0||r<t?(l&&(clearTimeout(l),l=null),o=e,c=a.apply(n,d),l||(n=d=null)):l||!1===i.trailing||(l=setTimeout(u,t)),c}},l.replaceCaptchaBx=function(){var e=c.body.querySelectorAll("form img");l.renderAll();for(var t=0;t<e.length;t++){var a=e[t];if(/\/bitrix\/tools\/captcha\.php\?(captcha_code|captcha_sid)=[0-9a-z]+/i.test(a.src)&&(a.src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",a.removeAttribute("width"),a.removeAttribute("height"),a.style.display="none",!a.parentNode.querySelector(".g-recaptcha"))){var r="d_recaptcha_"+Math.floor(16777215*Math.random()).toString(16),i=c.createElement("div");i.id=r,i.className="g-recaptcha",a.parentNode.appendChild(i),l.renderById(r)}}var n=c.querySelectorAll('form input[name="captcha_word"]');for(t=0;t<n.length;t++){var d=n[t];"none"!==d.style.display&&(d.style.display="none"),d.value=""}},l.init=function(){l.renderById=l.loadApi,c.addEventListener("DOMContentLoaded",function(){l.renderAll(),l.replaceCaptchaBx();var t=l.throttle(l.replaceCaptchaBx,200),e=r.MutationObserver||r.WebKitMutationObserver||r.MozMutationObserver;e?new e(function(e){e.forEach(function(e){"childList"===e.type&&0<e.addedNodes.length&&"IFRAME"!==e.addedNodes[0].tagName&&t()})}).observe(c.body,{attributes:!1,characterData:!1,childList:!0,subtree:!0,attributeOldValue:!1,characterDataOldValue:!1}):c.addEventListener("DOMNodeInserted",function(e){t()})})},l.init(),r.Recaptchafree=l,r.RecaptchafreeLoaded=l.loaded,r.RecaptchafreeSubmitForm=l.submitForm}(window,document);