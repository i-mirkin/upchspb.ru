App=function(){function u(){$("input, textarea").each(function(){0<$(this).val().length?$(this).addClass("valid"):$(this).removeClass("valid")}),$("body").on("keypress, change","input, textarea",function(){0<$(this).val().length?$(this).addClass("valid"):$(this).removeClass("valid")})}function l(e){var a=o(e),t="";return 0<a.h&&(t=("00"+a.h).slice(-2)+":"),t+=("00"+a.m).slice(-2)+":"+("00"+a.s).slice(-2)}function o(e){var a=(e=Math.round(e))%3600,t=a%60;return{h:Math.floor(e/3600),m:Math.floor(a/60),s:Math.ceil(t)}}function d(){var e="";if(window.getSelection)if(!document.activeElement||"textarea"!==document.activeElement.tagName.toLowerCase()&&"input"!==document.activeElement.tagName.toLowerCase()){try{if(window.getSelection)var a=window.getSelection().toString();else a=document.getSelection()}catch(e){console.log(e)}e=a}else{e=document.activeElement.value.substring(document.activeElement.selectionStart,document.activeElement.selectionEnd)}else document.selection.createRange&&(e=document.selection.createRange().text);return""!==e&&e}function e(){return window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty(),!0}function s(e,a){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.readyState?t.onreadystatechange=function(){"loaded"!==t.readyState&&"complete"!==t.readyState||(t.onreadystatechange=null,a())}:t.onload=function(){a()},t.src=e,document.getElementsByTagName("head")[0].appendChild(t)}return{init:function(){var e,a;u(),e=0,$(window).on("resize",function(){clearTimeout(e),e=setTimeout(function(){var e=$(window).width();e<768&&$(".wrap-fix-menu").removeClass("navbar-fixed-top")},80)}),$(window).scroll(function(e){var a=$(".header-top").height(),t=$(document).scrollTop(),o=$(window).width();a<t&&767<o?$(".wrap-fix-menu").addClass("navbar-fixed-top"):$(".wrap-fix-menu").removeClass("navbar-fixed-top")}),function(){var e=4<$(".owl-banners-main").data("items");e&&$(".wrap-main-banners .arrow-banners").show();var a=$(".owl-banners-main").owlCarousel({loop:e,margin:0,nav:!1,dots:!1,responsive:{0:{items:1},750:{items:2},992:{items:3},1200:{items:4}}});$(".next-banners-main").click(function(){return a.trigger("next.owl.carousel"),!1}),$(".prev-banners-main").click(function(){return a.trigger("prev.owl.carousel"),!1})}(),function(){var i=document.querySelector("#ya-map-main");if(i){if(void 0===jsOption.api_map_key_ya)return console.warn("twim.gossite: not key api map yandex;");void 0!==window.ymaps?e():s("https://api-maps.yandex.ru/2.1/?apikey="+jsOption.api_map_key_ya+"&lang=ru_RU",e)}function e(){ymaps.ready(function(){var e,a,t,o,n="#0e4779";return void 0===jsOption.coord_ya?(console.warn("twim.gossite: not set coord map yandex;"),!1):(void 0!==jsOption.ya_map_iconColor&&(n=jsOption.ya_map_iconColor),a=i.getAttribute("data-title"),(e=function(e){for(var a=e.split(","),t=0;t<a.length;t++)a[t]=a[t].trim();return!!(Array.isArray(a)&&2<=a.length)&&a}(jsOption.coord_ya))?((t=new ymaps.Map("ya-map-main",{center:e,zoom:10,controls:["zoomControl","fullscreenControl","trafficControl","typeSelector","geolocationControl"]})).behaviors.disable(["scrollZoom"]),t.container.fitToViewport(),o=new ymaps.Placemark(t.getCenter(),{iconCaption:a},{preset:"islands#icon",iconColor:n}),void t.geoObjects.add(o)):(console.warn("twim.gossite: not valid coord map yandex;"),!1))})}}(),$(".owl-slider-main").owlCarousel({loop:!0,margin:0,nav:!0,dots:!0,items:1,autoplay:!0,autoplayHoverPause:!0,navText:['<i class="ion ion-ios-arrow-left"></i>','<i class="ion ion-ios-arrow-right"></i>']}),t=[],o=[],n=new Date,$(".list-events-main .item").each(function(){var e=$(this).data("date"),a=moment(e,"DD.MM.YYYY");moment().isBefore(a)&&o.push(e),t.push(e)}),0<o.length&&(n=moment(o[0],"DD.MM.YYYY").format("MM/DD/YYYY")),$("#datetimepicker-events").datetimepicker({inline:!0,sideBySide:!1,useCurrent:!1,defaultDate:n,locale:"ru",format:"DD.MM.YYYY",icons:{previous:"ion ion-ios-play-outline ion-rotate-180",next:"ion ion-ios-play-outline"}}).on("dp.change",function(e){$(this).data("DateTimePicker").enabledDates(t),$(".list-events-main .item").hide(),$('.list-events-main .item[data-date="'+e.date.format("DD.MM.YYYY")+'"]').fadeIn("slow")}).on("dp.update",function(e){$(this).data("DateTimePicker").enabledDates(t)}).on("dp.load",function(){$(this).data("DateTimePicker").enabledDates(t),$('.list-events-main .item[data-date="'+o[0]+'"]').fadeIn("slow")}).trigger("dp.load"),function(){var a="fz-medium fz-large",t="ff-serif",o="tm-white tm-black tm-blue tm-brown",n="interval-medium interval-large";function i(e,a){var t,o=$.cookie("special_param");void 0!==o&&((t=JSON.parse(o))[e]=a,o=JSON.stringify(t),$.cookie("special_param",o,{path:"/"}))}function s(){var e=$.cookie("special_param");if(void 0!==e){var a=JSON.parse(e);if("Y"===a.special){var t="special";void 0!==a.theme?($(".color button").removeClass("active"),$('button[data-color="'+a.theme+'"]').addClass("active"),t+=" "+a.theme):($('button[data-color="tm-white"]').addClass("active"),t+=" tm-white"),void 0!==a.fz?($(".font-size button").removeClass("active"),$('button[data-font-size="'+a.fz+'"]').addClass("active"),t+=" "+a.fz):$('button[data-font-size=""]').addClass("active"),void 0!==a.ff?($(".font-family button").removeClass("active"),$('button[data-font-family="'+a.ff+'"]').trigger("click"),t+=" "+a.ff):$('button[data-font-family=""]').addClass("active"),void 0!==a.ls?($(".char-interval button").removeClass("active"),$('button[data-interval="'+a.ls+'"]').addClass("active"),t+=" "+a.ls):$('button[data-interval=""]').addClass("active"),"N"===a.image?($(".img-show-button").find("i.fa").removeClass("fa-check-square-o").addClass("fa-square-o").data("image","N"),t+=" hide-image"):($(".img-show-button").find("i.fa").removeClass("fa-square-o").addClass("fa-check-square-o").data("image","Y"),$("body").removeClass("hide-image")),$("body").addClass(t)}}}$("a.special").on("click",function(e){var a=$.cookie("special_param");if(void 0===a)a=JSON.stringify({special:"Y",theme:"tm-white",fz:"",ls:"",ff:"",image:"Y"});else{var t=JSON.parse(a);t.special="Y",a=JSON.stringify(t)}return $.cookie("special_param",a,{path:"/"}),s(),!1}),$("#link_settings").click(function(){$(".settings-panel").slideToggle("slow")}),$(document).on("click",function(e){var a=$(".special-panel");0===a.has(e.target).length&&$(".settings-panel").slideUp("slow")}),$("button.normal-version").on("click",function(e){i("special","N"),$("body").removeClass("special hide-image "+a+" "+t+" "+o+" "+n)}),$(".font-size button").on("click",function(){$(".font-size button").removeClass("active");var e=$(this).addClass("active").data("font-size");$("body").removeClass(a).addClass(e),i("fz",e)}),$(".font-family button").click(function(){$(".font-family button").removeClass("active");var e=$(this).addClass("active").data("font-family");$('button[data-font-family="'+e+'"]').addClass("active"),$("body").removeClass(t).addClass(e),i("ff",e)}),$(".color button").click(function(){$(".color button").removeClass("active");var e=$(this).addClass("active").data("color");$('button[data-color="'+e+'"]').addClass("active"),$("body").removeClass(o).addClass(e),i("theme",e)}),$(".char-interval button").click(function(){$(".char-interval button").removeClass("active");var e=$(this).addClass("active").data("interval");$("body").removeClass(n).addClass(e),i("ls",e)}),$(".img-show-button").click(function(){var e=$(this).data("image"),a="Y";"Y"===e?($(this).children("i.fa").removeClass("fa-check-square-o").addClass("fa-square-o"),a="N",$("body").addClass("hide-image")):($(this).children("i.fa").removeClass("fa-square-o").addClass("fa-check-square-o"),a="Y",$("body").removeClass("hide-image")),$(this).data("image",a),i("image",a)}),s()}(),a=0,$("#search-panel").on("hidden.bs.collapse",function(){$("body").removeClass("no-scroll").css({"padding-right":""}),$(".bt-overlay").remove(),$('input[type="text"]').blur()}),$("#search-panel").on("show.bs.collapse",function(){a=window.innerWidth-document.documentElement.clientWidth,$("body").addClass("no-scroll").append('<div class="bt-overlay"></div>'),$("body").css({"padding-right":a}),$('input[type="text"]').focus()}),$("#search-panel").on("show.bs.collapse",function(){$("html, body").animate({scrollTop:0},500)}),$("#search-panel").on("shown.bs.collapse",function(){$('input[type="text"]').focus()}),$("body").on("click",".bt-overlay",function(){$("#search-panel").collapse("hide")}),$("#search-panel .close").on("click",function(){$("#search-panel").collapse("hide")}),$(".upper").on("click",function(){$("html, body").animate({scrollTop:0},500)}),function(){var e=$('input[data-input="daterange"]'),a=e.val();if(e.daterangepicker({autoApply:!0,applyClass:"btn-info",cancelClass:"btn-info",locale:{applyLabel:"Готово",cancelLabel:"Закрыть",fromLabel:"От",toLabel:"До"}}),void 0!==a&&0===a.length){var t=moment().subtract(30,"days"),o=moment();e.data("daterangepicker").setStartDate(t),e.data("daterangepicker").setEndDate(o)}}(),$('a[href^="#"]').click(function(){var e=$('a[name="'+this.hash.slice(1)+'"]');if(0<e.length)return $("html, body").animate({scrollTop:$('a[name="'+this.hash.slice(1)+'"]').offset().top-100},1e3),!1}),$(".chocolat-gallery").Chocolat(),$("a.view_popup_doc").on("click",function(){var e=$(this).attr("href"),a=$(this).attr("title");return e.split(".").pop(),$.ajax({url:e,dataType:"html",method:"GET",cache:!1}).done(function(e){$("#modal_doc .modal-title").html(a),$("#modal_doc .modal-body").html(e),$("#modal_doc").modal("show")}),!1}),function(){function l(){try{if(BX.UserConsent.loadFromForms(),!BX.UserConsent)return;var e=BX.UserConsent.load(BX("userconsent-container"));if(!e)return;BX.addCustomEvent(e,BX.UserConsent.events.save,function(e){var a=$("form[name='question_form']");"Y"==a.data("submit")&&(a.trigger("submit"),a.data("submit","N"))}),BX.addCustomEvent(e,BX.UserConsent.events.refused,function(){$("form[name='question_form']").data("submit","N")})}catch(e){console.log("error BX.UserConsent.loadFromForms")}}function d(e,a){e.parent(".form-group").addClass("has-error"),e.next().next(".help-block").remove(),e.parent(".form-group").append("<span class='help-block'>"+a+"</span>")}function c(e){e.parent(".form-group").removeClass("has-error"),e.next().next(".help-block").remove()}$(".link-open-question").click(function(){var e=$(this),a=e.attr("href");return e.toggleClass("open"),$(a).removeClass("hidden").slideToggle("slow"),e.hasClass("open")?e.children("i.fa").attr("class","fa fa-chevron-up"):e.children("i.fa").attr("class","fa fa-chevron-down"),!1}),$('*[data-toggle="modal_classic"]').on("click",function(e){var a=$(this),t=a.data("target");if($(t).length<1){$("#modal_classic").clone().attr("id",t.substring(1)).appendTo("body");var o=a.data("load-page"),n=a.data("title"),i=$(t);i.find(".modal-title").text(n),$.ajax({url:o,dataType:"html",method:"GET",cache:!1,data:{AJAX_PAGE:"Y"}}).done(function(e){var a=$(e).find(".box-body");i.find(".modal-body").html(a),u(),l(),i.modal("show")}).fail(function(){i.find(".modal-body").html("Ошибка запроса, повторите операцию позже или обратитесь к администратору сайта"),i.modal("show")}).always(function(){void 0!==window.Recaptchafree&&Recaptchafree.reset()})}else{var i=$(t);i.modal("show")}}),BX.ready(function(){l()}),$(document).on("click","form[name='question_form'] input[type='submit']",function(){return $(this).closest("form").data("submit","Y"),BX.onCustomEvent("userconsent-event",[]),!1}),$(document).on("submit","form[name='question_form']",function(){var e=$("input[name='user_name']",$(this)),a=$("input[name='user_email']",$(this)),t=$("textarea[name='MESSAGE']",$(this)),o=$("button[type='submit']",$(this)),n=$(this),r=$(this).parent(".mfeedback"),i="N",s=0;return 0===e.val().length?(d(e,"Укажите, как к Вам обращаться"),i="Y"):e.val().length<3?(d(e,"Должно быть не менее 3-х символов"),i="Y"):c(e),0===t.val().length?(d(t,"Не заполнены обязательные поля"),i="Y"):t.val().length<10?(d(t,"Должно быть не менее 10-х символов"),i="Y"):c(t),0===a.val().length?(d(a,"Не заполнены обязательные поля"),i="Y"):/^[a-z0-9_-]+@[a-z0-9-]+\.[a-z]{2,6}$/i.test(a.val())?c(a):(d(a,"Ошибка! Введен некорректный адрес email"),i="Y"),"N"===i&&1!==s&&(s=1,o.prop("disabled",!0),$.ajax({type:n.attr("method"),url:n.attr("action"),data:n.serialize()+"&submit=y&AJAX_PAGE=Y",cache:!1,dataType:"html"}).done(function(e,a,t){var o=$(e).find(".mfeedback");r.replaceWith(o);var n,i,s=$(e).find(".ok-message");1===s.length&&($("#modal_question").modal("hide"),n=s.html(),(i=$("#modal_success")).length<1&&($("#modal_classic").clone().attr("id","modal_success").appendTo("body"),(i=$("#modal_success")).find(".modal-dialog").addClass("modal-sm")),i.find(".modal-body").html(n),setTimeout(function(){i.modal("show")},600)),l()}).fail(function(e,a,t){alert(a+": "+t)}).always(function(e,a){s=0,o.prop("disabled",!1),void 0!==window.Recaptchafree&&Recaptchafree.reset(),u()})),!1})}(),function(){function e(e){this.$element=$(e),this.$content=this.$element.find(".modal-content");var a=this.$content.outerHeight()-this.$content.innerHeight(),t=$(window).width()<768?20:60,o=$(window).height()-(t+a),n=this.$element.find(".modal-header").outerHeight()||0,i=this.$element.find(".modal-footer").outerHeight()||0,s=o-(n+i);this.$content.css({overflow:"hidden"}),this.$element.find(".modal-body").css({"max-height":s,"overflow-y":"auto"})}$(".modal.center").on("show.bs.modal",function(){$(this).show(),e(this)}),$(window).on("resize",function(){0!=$(".modal.center.in").length&&e($(".modal.center.in"))})}(),$("input[name='send']").on("click",function(){$(".form-group__type-send").toggle()}),$("input[data-input-date]").datetimepicker({inline:!1,sideBySide:!1,useCurrent:!0,locale:"ru",format:"DD.MM.YYYY"}),function(){function e(e){var a,t=$(".nav-main"),o=0,n=0;(a=$(this).next("ul")).css({left:"",display:"block"}),o=a[0].getBoundingClientRect(),n=t[0].getBoundingClientRect(),a.css({display:""}),n.right<o.right&&a.css({left:"-"+(o.right-n.right)+"px"}),"mouseenter"===e.type&&($(this).attr("aria-expanded","true"),$(this).parent("li.dropdown").addClass("open"))}"ontouchstart"in document.documentElement?$(".nav-main .dropdown-toggle").on("touchstart",e):$(".nav-main .dropdown-toggle").on("mouseenter",e)}(),$('[data-toggle="tooltip"]').tooltip();var t,o,n},onload:function(){$(".scrollbar-outer, .scrollbar-theme").scrollbar({ignoreMobile:!1,ignoreOverlay:!1}),function(){var o,n="stop",i=new Audio,s="";if("ya"==jsOption.type_voice){window.ya.speechkit.settings.lang="ru-RU",window.ya.speechkit.settings.apikey=jsOption.speechkit_apikey,window.ya.speechkit.settings.model="notes";var r=new ya.speechkit.Tts({emotion:"good",speed:1.1,speaker:"jane"});if(!jsOption.speechkit_apikey||""===jsOption.speechkit_apikey||" "===jsOption.speechkit_apikey)return}i.volume=1,$("body").hasClass("special")&&$(".soundbar").removeClass("hide"),$("a.special").on("click",function(e){$(".soundbar").removeClass("hide")}),$("button.normal-version").on("click",function(e){$(".soundbar").addClass("hide")}),"ontouchstart"in document.documentElement||($(".soundbar").removeClass("soundbar_hide"),$(".wrap-content").on("mouseup",function(e){var a,t;s=d();var o=$(".soundcursor");s&&$("body").hasClass("special")?(a=e.pageX,t=e.pageY,0===o.length&&$("body").append('<button class="soundcursor"><div class="soundcursor__icon"><i class="fa fa-play" aria-hidden="true"></i></div></button>'),$(".soundcursor").css({top:t-25,left:a+10})):$(".soundcursor").remove()}).on("mousedown",function(){e()}),$("body").on("click",".soundcursor",function(e){if(s)if(3e3<s.length){var a=$("#modal_error");a.length<1&&($("#modal_classic").clone().attr("id","modal_error").appendTo("body"),a=$("#modal_error")),a.find(".modal-dialog").addClass("modal-sm"),a.find(".modal-title").html("Ошибка"),a.find(".modal-body").html("Выделенный текст должен иметь меньше 3000 символов, текущий размер - "+s.length+" символов"),a.modal("show")}else $(".soundbar_loader").removeClass("soundbar_loader_hide"),$(".soundbar__play").addClass("soundbar__play_hide"),t=s,"ya"==jsOption.type_voice?(i.pause(),n="play",r.speak(t,{dataCallback:function(e){"stop"!==n&&(i.src=URL.createObjectURL(e),i.play(),$(".soundbar_loader").addClass("soundbar_loader_hide"),$(".soundbar__play").addClass("soundbar__play_hide"),$(".soundbar__timers").removeClass("soundbar__timers_hide"),o=setInterval(function(){$(".soundbar__curretn-time").text(l(i.currentTime))},1e3))}})):"rv"==jsOption.type_voice&&responsiveVoice.voiceSupport()&&responsiveVoice.speak(t,"Russian Female",{onstart:function(){$(".soundbar_loader").addClass("soundbar_loader_hide"),$(".soundbar__play").addClass("soundbar__play_hide"),$(".soundbar__timers").removeClass("soundbar__timers_hide"),$(".soundbar__duration-time").html("&nbsp;"),$(".soundbar__curretn-time").html("&nbsp;")},onend:function(){$(".soundbar__play").removeClass("soundbar__play_hide"),$(".soundbar__timers").addClass("soundbar__timers_hide")}});var t;return $(".soundcursor").remove(),!1}),$(i).on("ended",function(){clearInterval(o),$(".soundbar__play").removeClass("soundbar__play_hide"),$(".soundbar__timers").addClass("soundbar__timers_hide")}).on("loadedmetadata",function(){$(".soundbar__duration-time").text(l(i.duration))}),$(".soundbar").on("click",function(){i.pause(),n="stop",$(".soundbar__play").removeClass("soundbar__play_hide"),$(".soundbar__timers").addClass("soundbar__timers_hide"),$(".soundbar_loader").addClass("soundbar_loader_hide"),"rv"==jsOption.type_voice&&responsiveVoice.cancel()}))}()},getSelectedText:d,removeSelectedText:e,secondsToTime:o,formatTime:l,loadScript:s,supports_html5_storage:function(){try{return"localStorage"in window&&null!==window.localStorage}catch(e){return!1}}}}();var AppIR={init:function(){var n,i,e,s,a,t,o,r,l,d,c;$("input[data-category]").change(function(e){var a=$(this),t=a.val(),o=$(".wrap-select[data-category-toggle="+t+"]");o.removeClass("hidden"),o.find("select").prop("disabled",!1),$(".wrap-select[data-category-toggle]").not(o).addClass("hidden").find("select").prop("disabled",!0)}),$("input[data-disabled-input]").change(function(){var e=$(this),a=e.data("disabled-input");e.prop("checked")?$(a).prop("disabled",!0):$(a).prop("disabled",!1)}),n=$("#coauthor-template").html(),i=$(".ir-coauthors-include"),e=i.find(".ir-coauthor"),s=e.length,e.find(".ir-coauthor_btn").on("click",function(e){$(this).parents(".ir-coauthor").remove()}),$("#add-coauthor").on("click",function(e){s++;var a=n.replace(/#ID#/gi,s),t=$(a),o=t.find(".ir-coauthor_btn");o.on("click",function(e){t.remove()}),i.append(t)}),a=$(".ir-wrapper-password-inputs"),$("#ir-toggle-reg").on("change",function(e){$(this).prop("checked")?a.removeClass("hidden"):a.addClass("hidden")}),t=$(".file-upload"),r=(o=t).find(".file-upload__input-file"),l=o.find(".file-upload__button"),(d=o.next(".file-upload-clear")).on("click",function(e){r.val(""),l.text(l.data("text")),d.addClass("hidden")}),r.focus(function(){o.addClass("focus")}).blur(function(){o.removeClass("focus")}),r.change(function(){var e,a;0<r[0].files.length&&(l.text(r[0].files.length+" "+(e=r[0].files.length,a=["файл","файла","файлов"],cases=[2,0,1,1,1,2],a[4<e%100&&e%100<20?2:cases[e%10<5?e%10:5]])),d.removeClass("hidden"))}).change(),$(window).resize(function(){r.triggerHandler("change")}),0<(c=$(".ir-popup_success")).length&&c.fadeIn()}};jQuery(function(e){App.init(),AppIR.init()}),$(window).on("load",function(){App.onload()}),Modernizr.touchevents&&$("html").removeClass("bx-no-touch").addClass("bx-touch");